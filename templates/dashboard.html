{% extends "base.html" %}
{% block title %}Zoznam náradia{% endblock %}
{% block content %}
<h1>Zoznam náradia</h1>
<table class="table table-dark table-striped table-hover table-sm">
    <thead>
        <tr>
            <th>Názov</th>
            <th>Typ</th>
            <th>Kategória</th>
            <th>Sériové číslo</th>
            <th>Stav</th>
            <th>Pobočka</th>
            <th>Dátum zakúpenia</th>
            <th>Platnosť záruky</th>
            <th>Poznámky</th>
            <th>Servisné záznamy</th>
            <th>História zmien</th>
        </tr>
    </thead>
    <tbody>
        {% for tool in tools %}
        <tr>
            <td>
    <a class="link-light text-decoration-underline" href="{% url 'tool_detail' tool.id %}">
        {{ tool.name }}
    </a>
</td>
            <td>{{ tool.type }}</td>
            <td>{{ tool.category }}</td>
            <td>{{ tool.serial_number }}</td>
            <td>
                {% with code=tool.status label=tool.get_status_display %}
                    {% if code == "sklad" %}
                        <span class="badge bg-success">{{ label }}</span>
                    {% elif code == "vydane" %}
                        <span class="badge bg-warning text-dark">{{ label }}</span>
                    {% elif code == "poskodene" %}
                        <span class="badge bg-danger">{{ label }}</span>
                    {% elif code == "v_servise" or code == "cakajuci_servis" %}
                        <span class="badge bg-info text-dark">{{ label }}</span>
                    {% elif code == "vyradene" or code == "stratene" %}
                        <span class="badge bg-secondary">{{ label }}</span>
                    {% else %}
                        <span class="badge bg-light text-dark">{{ label }}</span>
                    {% endif %}
                {% endwith %}
            </td>
            <td>{{ tool.branch.name }}</td>
            <td>{{ tool.purchase_date|date:"d.m.Y" }}</td>
            <td>{{ tool.warranty_until|date:"d.m.Y" }}</td>
            <td>{{ tool.notes|default:"—" }}</td>
            <td>{{ tool.servicerecord_set.count }}</td>
            <td>{{ tool.toolhistory_set.count }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
